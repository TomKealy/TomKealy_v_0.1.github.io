<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Pipelines and Pandas | fastpages</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Pipelines and Pandas" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An easy to use blogging platform with support for Jupyter Notebooks." />
<meta property="og:description" content="An easy to use blogging platform with support for Jupyter Notebooks." />
<link rel="canonical" href="https://tomkealy.github.io/TomKealy.github.io/2021/04/01/ames-iowa.html" />
<meta property="og:url" content="https://tomkealy.github.io/TomKealy.github.io/2021/04/01/ames-iowa.html" />
<meta property="og:site_name" content="fastpages" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-04-01T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2021-04-01T00:00:00-05:00","url":"https://tomkealy.github.io/TomKealy.github.io/2021/04/01/ames-iowa.html","@type":"BlogPosting","headline":"Pipelines and Pandas","dateModified":"2021-04-01T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomkealy.github.io/TomKealy.github.io/2021/04/01/ames-iowa.html"},"description":"An easy to use blogging platform with support for Jupyter Notebooks.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/TomKealy.github.io/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://tomkealy.github.io/TomKealy.github.io/feed.xml" title="fastpages" /><link rel="shortcut icon" type="image/x-icon" href="/TomKealy.github.io/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/TomKealy.github.io/">fastpages</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/TomKealy.github.io/about/">About Me</a><a class="page-link" href="/TomKealy.github.io/search/">Search</a><a class="page-link" href="/TomKealy.github.io/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Pipelines and Pandas</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-04-01T00:00:00-05:00" itemprop="datePublished">
        Apr 1, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      20 min read
    
</span></p>

    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/TomKealy/TomKealy.github.io/tree/master/_notebooks/2021-04-01-ames-iowa.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/TomKealy.github.io/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/TomKealy/TomKealy.github.io/master?filepath=_notebooks%2F2021-04-01-ames-iowa.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/TomKealy.github.io/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/TomKealy/TomKealy.github.io/blob/master/_notebooks/2021-04-01-ames-iowa.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/TomKealy.github.io/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-04-01-ames-iowa.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.base</span> <span class="kn">import</span> <span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ames</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;ames.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ames</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Order</th>
      <th>PID</th>
      <th>MS.SubClass</th>
      <th>MS.Zoning</th>
      <th>Lot.Frontage</th>
      <th>Lot.Area</th>
      <th>Street</th>
      <th>Alley</th>
      <th>Lot.Shape</th>
      <th>Land.Contour</th>
      <th>...</th>
      <th>Pool.Area</th>
      <th>Pool.QC</th>
      <th>Fence</th>
      <th>Misc.Feature</th>
      <th>Misc.Val</th>
      <th>Mo.Sold</th>
      <th>Yr.Sold</th>
      <th>Sale.Type</th>
      <th>Sale.Condition</th>
      <th>SalePrice</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>526301100</td>
      <td>20</td>
      <td>RL</td>
      <td>141.0</td>
      <td>31770</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>IR1</td>
      <td>Lvl</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0</td>
      <td>5</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>215000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>526350040</td>
      <td>20</td>
      <td>RH</td>
      <td>80.0</td>
      <td>11622</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>Reg</td>
      <td>Lvl</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>MnPrv</td>
      <td>NaN</td>
      <td>0</td>
      <td>6</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>105000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>526351010</td>
      <td>20</td>
      <td>RL</td>
      <td>81.0</td>
      <td>14267</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>IR1</td>
      <td>Lvl</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Gar2</td>
      <td>12500</td>
      <td>6</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>172000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>526353030</td>
      <td>20</td>
      <td>RL</td>
      <td>93.0</td>
      <td>11160</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>Reg</td>
      <td>Lvl</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0</td>
      <td>4</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>244000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>527105010</td>
      <td>60</td>
      <td>RL</td>
      <td>74.0</td>
      <td>13830</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>IR1</td>
      <td>Lvl</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>MnPrv</td>
      <td>NaN</td>
      <td>0</td>
      <td>3</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>189900</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>527105030</td>
      <td>60</td>
      <td>RL</td>
      <td>78.0</td>
      <td>9978</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>IR1</td>
      <td>Lvl</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0</td>
      <td>6</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>195500</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>527127150</td>
      <td>120</td>
      <td>RL</td>
      <td>41.0</td>
      <td>4920</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>Reg</td>
      <td>Lvl</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0</td>
      <td>4</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>213500</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>527145080</td>
      <td>120</td>
      <td>RL</td>
      <td>43.0</td>
      <td>5005</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>IR1</td>
      <td>HLS</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0</td>
      <td>1</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>191500</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>527146030</td>
      <td>120</td>
      <td>RL</td>
      <td>39.0</td>
      <td>5389</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>IR1</td>
      <td>Lvl</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0</td>
      <td>3</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>236500</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>527162130</td>
      <td>60</td>
      <td>RL</td>
      <td>60.0</td>
      <td>7500</td>
      <td>Pave</td>
      <td>NaN</td>
      <td>Reg</td>
      <td>Lvl</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0</td>
      <td>6</td>
      <td>2010</td>
      <td>WD</td>
      <td>Normal</td>
      <td>189000</td>
    </tr>
  </tbody>
</table>
<p>10 rows × 82 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It's always a good idea to set an index on a DataFrame if you have one. In this case, the <code>PID</code> column is a unique identifier.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ames</span> <span class="o">=</span> <span class="n">ames</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;PID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ames</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Order</th>
      <td>2930.0</td>
      <td>1465.500000</td>
      <td>845.962470</td>
      <td>1.0</td>
      <td>733.25</td>
      <td>1465.5</td>
      <td>2197.75</td>
      <td>2930.0</td>
    </tr>
    <tr>
      <th>MS.SubClass</th>
      <td>2930.0</td>
      <td>57.387372</td>
      <td>42.638025</td>
      <td>20.0</td>
      <td>20.00</td>
      <td>50.0</td>
      <td>70.00</td>
      <td>190.0</td>
    </tr>
    <tr>
      <th>Lot.Frontage</th>
      <td>2440.0</td>
      <td>69.224590</td>
      <td>23.365335</td>
      <td>21.0</td>
      <td>58.00</td>
      <td>68.0</td>
      <td>80.00</td>
      <td>313.0</td>
    </tr>
    <tr>
      <th>Lot.Area</th>
      <td>2930.0</td>
      <td>10147.921843</td>
      <td>7880.017759</td>
      <td>1300.0</td>
      <td>7440.25</td>
      <td>9436.5</td>
      <td>11555.25</td>
      <td>215245.0</td>
    </tr>
    <tr>
      <th>Overall.Qual</th>
      <td>2930.0</td>
      <td>6.094881</td>
      <td>1.411026</td>
      <td>1.0</td>
      <td>5.00</td>
      <td>6.0</td>
      <td>7.00</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>Overall.Cond</th>
      <td>2930.0</td>
      <td>5.563140</td>
      <td>1.111537</td>
      <td>1.0</td>
      <td>5.00</td>
      <td>5.0</td>
      <td>6.00</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>Year.Built</th>
      <td>2930.0</td>
      <td>1971.356314</td>
      <td>30.245361</td>
      <td>1872.0</td>
      <td>1954.00</td>
      <td>1973.0</td>
      <td>2001.00</td>
      <td>2010.0</td>
    </tr>
    <tr>
      <th>Year.Remod.Add</th>
      <td>2930.0</td>
      <td>1984.266553</td>
      <td>20.860286</td>
      <td>1950.0</td>
      <td>1965.00</td>
      <td>1993.0</td>
      <td>2004.00</td>
      <td>2010.0</td>
    </tr>
    <tr>
      <th>Mas.Vnr.Area</th>
      <td>2907.0</td>
      <td>101.896801</td>
      <td>179.112611</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>164.00</td>
      <td>1600.0</td>
    </tr>
    <tr>
      <th>BsmtFin.SF.1</th>
      <td>2929.0</td>
      <td>442.629566</td>
      <td>455.590839</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>370.0</td>
      <td>734.00</td>
      <td>5644.0</td>
    </tr>
    <tr>
      <th>BsmtFin.SF.2</th>
      <td>2929.0</td>
      <td>49.722431</td>
      <td>169.168476</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>1526.0</td>
    </tr>
    <tr>
      <th>Bsmt.Unf.SF</th>
      <td>2929.0</td>
      <td>559.262547</td>
      <td>439.494153</td>
      <td>0.0</td>
      <td>219.00</td>
      <td>466.0</td>
      <td>802.00</td>
      <td>2336.0</td>
    </tr>
    <tr>
      <th>Total.Bsmt.SF</th>
      <td>2929.0</td>
      <td>1051.614544</td>
      <td>440.615067</td>
      <td>0.0</td>
      <td>793.00</td>
      <td>990.0</td>
      <td>1302.00</td>
      <td>6110.0</td>
    </tr>
    <tr>
      <th>X1st.Flr.SF</th>
      <td>2930.0</td>
      <td>1159.557679</td>
      <td>391.890885</td>
      <td>334.0</td>
      <td>876.25</td>
      <td>1084.0</td>
      <td>1384.00</td>
      <td>5095.0</td>
    </tr>
    <tr>
      <th>X2nd.Flr.SF</th>
      <td>2930.0</td>
      <td>335.455973</td>
      <td>428.395715</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>703.75</td>
      <td>2065.0</td>
    </tr>
    <tr>
      <th>Low.Qual.Fin.SF</th>
      <td>2930.0</td>
      <td>4.676792</td>
      <td>46.310510</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>1064.0</td>
    </tr>
    <tr>
      <th>Gr.Liv.Area</th>
      <td>2930.0</td>
      <td>1499.690444</td>
      <td>505.508887</td>
      <td>334.0</td>
      <td>1126.00</td>
      <td>1442.0</td>
      <td>1742.75</td>
      <td>5642.0</td>
    </tr>
    <tr>
      <th>Bsmt.Full.Bath</th>
      <td>2928.0</td>
      <td>0.431352</td>
      <td>0.524820</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>1.00</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>Bsmt.Half.Bath</th>
      <td>2928.0</td>
      <td>0.061134</td>
      <td>0.245254</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Full.Bath</th>
      <td>2930.0</td>
      <td>1.566553</td>
      <td>0.552941</td>
      <td>0.0</td>
      <td>1.00</td>
      <td>2.0</td>
      <td>2.00</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Half.Bath</th>
      <td>2930.0</td>
      <td>0.379522</td>
      <td>0.502629</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>1.00</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Bedroom.AbvGr</th>
      <td>2930.0</td>
      <td>2.854266</td>
      <td>0.827731</td>
      <td>0.0</td>
      <td>2.00</td>
      <td>3.0</td>
      <td>3.00</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>Kitchen.AbvGr</th>
      <td>2930.0</td>
      <td>1.044369</td>
      <td>0.214076</td>
      <td>0.0</td>
      <td>1.00</td>
      <td>1.0</td>
      <td>1.00</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>TotRms.AbvGrd</th>
      <td>2930.0</td>
      <td>6.443003</td>
      <td>1.572964</td>
      <td>2.0</td>
      <td>5.00</td>
      <td>6.0</td>
      <td>7.00</td>
      <td>15.0</td>
    </tr>
    <tr>
      <th>Fireplaces</th>
      <td>2930.0</td>
      <td>0.599317</td>
      <td>0.647921</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>1.0</td>
      <td>1.00</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Garage.Yr.Blt</th>
      <td>2771.0</td>
      <td>1978.132443</td>
      <td>25.528411</td>
      <td>1895.0</td>
      <td>1960.00</td>
      <td>1979.0</td>
      <td>2002.00</td>
      <td>2207.0</td>
    </tr>
    <tr>
      <th>Garage.Cars</th>
      <td>2929.0</td>
      <td>1.766815</td>
      <td>0.760566</td>
      <td>0.0</td>
      <td>1.00</td>
      <td>2.0</td>
      <td>2.00</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>Garage.Area</th>
      <td>2929.0</td>
      <td>472.819734</td>
      <td>215.046549</td>
      <td>0.0</td>
      <td>320.00</td>
      <td>480.0</td>
      <td>576.00</td>
      <td>1488.0</td>
    </tr>
    <tr>
      <th>Wood.Deck.SF</th>
      <td>2930.0</td>
      <td>93.751877</td>
      <td>126.361562</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>168.00</td>
      <td>1424.0</td>
    </tr>
    <tr>
      <th>Open.Porch.SF</th>
      <td>2930.0</td>
      <td>47.533447</td>
      <td>67.483400</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>27.0</td>
      <td>70.00</td>
      <td>742.0</td>
    </tr>
    <tr>
      <th>Enclosed.Porch</th>
      <td>2930.0</td>
      <td>23.011604</td>
      <td>64.139059</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>1012.0</td>
    </tr>
    <tr>
      <th>X3Ssn.Porch</th>
      <td>2930.0</td>
      <td>2.592491</td>
      <td>25.141331</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>508.0</td>
    </tr>
    <tr>
      <th>Screen.Porch</th>
      <td>2930.0</td>
      <td>16.002048</td>
      <td>56.087370</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>576.0</td>
    </tr>
    <tr>
      <th>Pool.Area</th>
      <td>2930.0</td>
      <td>2.243345</td>
      <td>35.597181</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>800.0</td>
    </tr>
    <tr>
      <th>Misc.Val</th>
      <td>2930.0</td>
      <td>50.635154</td>
      <td>566.344288</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>17000.0</td>
    </tr>
    <tr>
      <th>Mo.Sold</th>
      <td>2930.0</td>
      <td>6.216041</td>
      <td>2.714492</td>
      <td>1.0</td>
      <td>4.00</td>
      <td>6.0</td>
      <td>8.00</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>Yr.Sold</th>
      <td>2930.0</td>
      <td>2007.790444</td>
      <td>1.316613</td>
      <td>2006.0</td>
      <td>2007.00</td>
      <td>2008.0</td>
      <td>2009.00</td>
      <td>2010.0</td>
    </tr>
    <tr>
      <th>SalePrice</th>
      <td>2930.0</td>
      <td>180796.060068</td>
      <td>79886.692357</td>
      <td>12789.0</td>
      <td>129500.00</td>
      <td>160000.0</td>
      <td>213500.00</td>
      <td>755000.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The main comment is that there's a lof of missing data, and that some columns should be dropped entirely (in particular Alley, Pool QC, Fence, Misc Feature, Fireplace QC) - or the dataset documentation needs to be checked to see that N/A isn't a default category in these cases. There's also a mixture of categorical and numerical features, which is a little tricky to handle. Luckily sklearn has the <code>FeatureUnion</code> and <code>Pipeline</code> objects to help us.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ames</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Order                0
MS.SubClass          0
MS.Zoning            0
Lot.Frontage       490
Lot.Area             0
Street               0
Alley             2732
Lot.Shape            0
Land.Contour         0
Utilities            0
Lot.Config           0
Land.Slope           0
Neighborhood         0
Condition.1          0
Condition.2          0
Bldg.Type            0
House.Style          0
Overall.Qual         0
Overall.Cond         0
Year.Built           0
Year.Remod.Add       0
Roof.Style           0
Roof.Matl            0
Exterior.1st         0
Exterior.2nd         0
Mas.Vnr.Type        23
Mas.Vnr.Area        23
Exter.Qual           0
Exter.Cond           0
Foundation           0
                  ... 
Bedroom.AbvGr        0
Kitchen.AbvGr        0
Kitchen.Qual         0
TotRms.AbvGrd        0
Functional           0
Fireplaces           0
Fireplace.Qu      1422
Garage.Type        157
Garage.Yr.Blt      159
Garage.Finish      159
Garage.Cars          1
Garage.Area          1
Garage.Qual        159
Garage.Cond        159
Paved.Drive          0
Wood.Deck.SF         0
Open.Porch.SF        0
Enclosed.Porch       0
X3Ssn.Porch          0
Screen.Porch         0
Pool.Area            0
Pool.QC           2917
Fence             2358
Misc.Feature      2824
Misc.Val             0
Mo.Sold              0
Yr.Sold              0
Sale.Type            0
Sale.Condition       0
SalePrice            0
Length: 81, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First of all, let's build a transformer which drops the columns we suggest. A sklearn compatible transformer is a class which has to have two methods <code>fit</code> (which returns <code>self</code>), and <code>transform</code> (which can return whatever you want). It's a good idea to inherit from <code>sklearn.base.TransformerMixin</code> and <code>sklearn.base.BaseEstimator</code>. The general pattern of a Transformer is:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.base</span> <span class="kn">import</span> <span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span>

<span class="k">class</span> <span class="nc">ExampleTransformer</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    
    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    
    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">do_something_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These are actually quite simple, and can be quite flexible. Later on, we might see a transformer that uses the <code>fit</code> method. Anyway, here's a column dropper.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span><span class="p">,</span> <span class="n">FeatureUnion</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LarsCV</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span>  <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span><span class="p">,</span> <span class="n">mean_squared_log_error</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">ColumnDropper</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Transformer to drop a list of cols</span>
<span class="sd">    &#39;&#39;&#39;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drop_cols</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_drop_cols</span> <span class="o">=</span> <span class="n">drop_cols</span>
    
    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    
    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_drop_cols</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">ames</span><span class="p">[</span><span class="s1">&#39;SalePrice&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">ames</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;SalePrice&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">X</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;Order&#39;, &#39;MS.SubClass&#39;, &#39;MS.Zoning&#39;, &#39;Lot.Frontage&#39;, &#39;Lot.Area&#39;,
       &#39;Street&#39;, &#39;Alley&#39;, &#39;Lot.Shape&#39;, &#39;Land.Contour&#39;, &#39;Utilities&#39;,
       &#39;Lot.Config&#39;, &#39;Land.Slope&#39;, &#39;Neighborhood&#39;, &#39;Condition.1&#39;,
       &#39;Condition.2&#39;, &#39;Bldg.Type&#39;, &#39;House.Style&#39;, &#39;Overall.Qual&#39;,
       &#39;Overall.Cond&#39;, &#39;Year.Built&#39;, &#39;Year.Remod.Add&#39;, &#39;Roof.Style&#39;,
       &#39;Roof.Matl&#39;, &#39;Exterior.1st&#39;, &#39;Exterior.2nd&#39;, &#39;Mas.Vnr.Type&#39;,
       &#39;Mas.Vnr.Area&#39;, &#39;Exter.Qual&#39;, &#39;Exter.Cond&#39;, &#39;Foundation&#39;, &#39;Bsmt.Qual&#39;,
       &#39;Bsmt.Cond&#39;, &#39;Bsmt.Exposure&#39;, &#39;BsmtFin.Type.1&#39;, &#39;BsmtFin.SF.1&#39;,
       &#39;BsmtFin.Type.2&#39;, &#39;BsmtFin.SF.2&#39;, &#39;Bsmt.Unf.SF&#39;, &#39;Total.Bsmt.SF&#39;,
       &#39;Heating&#39;, &#39;Heating.QC&#39;, &#39;Central.Air&#39;, &#39;Electrical&#39;, &#39;X1st.Flr.SF&#39;,
       &#39;X2nd.Flr.SF&#39;, &#39;Low.Qual.Fin.SF&#39;, &#39;Gr.Liv.Area&#39;, &#39;Bsmt.Full.Bath&#39;,
       &#39;Bsmt.Half.Bath&#39;, &#39;Full.Bath&#39;, &#39;Half.Bath&#39;, &#39;Bedroom.AbvGr&#39;,
       &#39;Kitchen.AbvGr&#39;, &#39;Kitchen.Qual&#39;, &#39;TotRms.AbvGrd&#39;, &#39;Functional&#39;,
       &#39;Fireplaces&#39;, &#39;Fireplace.Qu&#39;, &#39;Garage.Type&#39;, &#39;Garage.Yr.Blt&#39;,
       &#39;Garage.Finish&#39;, &#39;Garage.Cars&#39;, &#39;Garage.Area&#39;, &#39;Garage.Qual&#39;,
       &#39;Garage.Cond&#39;, &#39;Paved.Drive&#39;, &#39;Wood.Deck.SF&#39;, &#39;Open.Porch.SF&#39;,
       &#39;Enclosed.Porch&#39;, &#39;X3Ssn.Porch&#39;, &#39;Screen.Porch&#39;, &#39;Pool.Area&#39;, &#39;Pool.QC&#39;,
       &#39;Fence&#39;, &#39;Misc.Feature&#39;, &#39;Misc.Val&#39;, &#39;Mo.Sold&#39;, &#39;Yr.Sold&#39;, &#39;Sale.Type&#39;,
       &#39;Sale.Condition&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([(</span><span class="s1">&#39;dropper&#39;</span><span class="p">,</span> <span class="n">ColumnDropper</span><span class="p">([</span><span class="s1">&#39;Alley&#39;</span><span class="p">,</span> <span class="s1">&#39;Pool.QC&#39;</span><span class="p">,</span> <span class="s1">&#39;Fence&#39;</span><span class="p">,</span> <span class="s1">&#39;Misc.Feature&#39;</span><span class="p">,</span> <span class="s1">&#39;Fireplace.Qu&#39;</span><span class="p">,</span> <span class="s1">&#39;Order&#39;</span><span class="p">]))])</span>
<span class="n">X_trans</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">X_trans</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;MS.SubClass&#39;, &#39;MS.Zoning&#39;, &#39;Lot.Frontage&#39;, &#39;Lot.Area&#39;, &#39;Street&#39;,
       &#39;Lot.Shape&#39;, &#39;Land.Contour&#39;, &#39;Utilities&#39;, &#39;Lot.Config&#39;, &#39;Land.Slope&#39;,
       &#39;Neighborhood&#39;, &#39;Condition.1&#39;, &#39;Condition.2&#39;, &#39;Bldg.Type&#39;,
       &#39;House.Style&#39;, &#39;Overall.Qual&#39;, &#39;Overall.Cond&#39;, &#39;Year.Built&#39;,
       &#39;Year.Remod.Add&#39;, &#39;Roof.Style&#39;, &#39;Roof.Matl&#39;, &#39;Exterior.1st&#39;,
       &#39;Exterior.2nd&#39;, &#39;Mas.Vnr.Type&#39;, &#39;Mas.Vnr.Area&#39;, &#39;Exter.Qual&#39;,
       &#39;Exter.Cond&#39;, &#39;Foundation&#39;, &#39;Bsmt.Qual&#39;, &#39;Bsmt.Cond&#39;, &#39;Bsmt.Exposure&#39;,
       &#39;BsmtFin.Type.1&#39;, &#39;BsmtFin.SF.1&#39;, &#39;BsmtFin.Type.2&#39;, &#39;BsmtFin.SF.2&#39;,
       &#39;Bsmt.Unf.SF&#39;, &#39;Total.Bsmt.SF&#39;, &#39;Heating&#39;, &#39;Heating.QC&#39;, &#39;Central.Air&#39;,
       &#39;Electrical&#39;, &#39;X1st.Flr.SF&#39;, &#39;X2nd.Flr.SF&#39;, &#39;Low.Qual.Fin.SF&#39;,
       &#39;Gr.Liv.Area&#39;, &#39;Bsmt.Full.Bath&#39;, &#39;Bsmt.Half.Bath&#39;, &#39;Full.Bath&#39;,
       &#39;Half.Bath&#39;, &#39;Bedroom.AbvGr&#39;, &#39;Kitchen.AbvGr&#39;, &#39;Kitchen.Qual&#39;,
       &#39;TotRms.AbvGrd&#39;, &#39;Functional&#39;, &#39;Fireplaces&#39;, &#39;Garage.Type&#39;,
       &#39;Garage.Yr.Blt&#39;, &#39;Garage.Finish&#39;, &#39;Garage.Cars&#39;, &#39;Garage.Area&#39;,
       &#39;Garage.Qual&#39;, &#39;Garage.Cond&#39;, &#39;Paved.Drive&#39;, &#39;Wood.Deck.SF&#39;,
       &#39;Open.Porch.SF&#39;, &#39;Enclosed.Porch&#39;, &#39;X3Ssn.Porch&#39;, &#39;Screen.Porch&#39;,
       &#39;Pool.Area&#39;, &#39;Misc.Val&#39;, &#39;Mo.Sold&#39;, &#39;Yr.Sold&#39;, &#39;Sale.Type&#39;,
       &#39;Sale.Condition&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Another option, especially with columns with missing values, is to impute the value but to include a column telling the model where the imputed values are.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">ImputeWithDummy</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols_to_impute</span><span class="p">,</span> <span class="n">strategy</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;NA&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_to_impute</span> <span class="o">=</span> <span class="n">cols_to_impute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">=</span> <span class="n">strategy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">fill</span>
        
    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">==</span> <span class="s1">&#39;mean&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">==</span> <span class="s1">&#39;median&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">==</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">==</span> <span class="s1">&#39;fill&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="ow">is</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">cname</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">cname</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">)])</span>
        <span class="k">return</span> <span class="bp">self</span>
    
    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cols_to_impute</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_missing&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">col</span><span class="p">)]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
            <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">df</span>
    
<span class="n">X</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;ames.csv&#39;</span><span class="p">)</span>
<span class="n">imputer</span> <span class="o">=</span> <span class="n">ImputeWithDummy</span><span class="p">([</span><span class="s1">&#39;Alley&#39;</span><span class="p">],</span> <span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;mode&#39;</span><span class="p">)</span>
<span class="n">X_transformed</span> <span class="o">=</span> <span class="n">imputer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">X_transformed</span><span class="p">[[</span><span class="s1">&#39;Alley&#39;</span><span class="p">,</span> <span class="s1">&#39;Alley_missing&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Alley</th>
      <th>Alley_missing</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Grvl</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Grvl</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Grvl</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Grvl</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Grvl</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Of course, you should always read the data documentation (<a href="https://ww2.amstat.org/publications/jse/v19n3/decock/datadocumentation.txt">https://ww2.amstat.org/publications/jse/v19n3/decock/datadocumentation.txt</a>), and there you'll see for Alley that NaN means No Alley Access, and that we don't need to any imputation at all!</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">NaNImpute</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">fill_vals</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">=</span> <span class="n">cols</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_vals</span> <span class="o">=</span> <span class="n">fill_vals</span>
        
    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    
    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span><span class="p">):</span>
            <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_vals</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The other thing we'll need to consider is that some columns will need to be converted to numeric features first, before an estimator can be fitted. First we'll fit an imputer, and then encode.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">DummyEncoding</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    
    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">drop_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">impute_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Alley&#39;</span><span class="p">,</span> <span class="s1">&#39;Pool.QC&#39;</span><span class="p">,</span> <span class="s1">&#39;Fence&#39;</span><span class="p">,</span> <span class="s1">&#39;Misc.Feature&#39;</span><span class="p">,</span> <span class="s1">&#39;Fireplace.Qu&#39;</span><span class="p">]</span>
<span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([(</span><span class="s1">&#39;impute&#39;</span><span class="p">,</span> <span class="n">ImputeWithDummy</span><span class="p">(</span><span class="n">impute_cols</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;mode&#39;</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;encode&#39;</span><span class="p">,</span> <span class="n">DummyEncoding</span><span class="p">(</span><span class="n">impute_cols</span><span class="p">))])</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;ames.csv&#39;</span><span class="p">)</span>
<span class="n">X_trans</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">X_trans</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;Order&#39;, &#39;PID&#39;, &#39;MS.SubClass&#39;, &#39;MS.Zoning&#39;, &#39;Lot.Frontage&#39;, &#39;Lot.Area&#39;,
       &#39;Street&#39;, &#39;Lot.Shape&#39;, &#39;Land.Contour&#39;, &#39;Utilities&#39;, &#39;Lot.Config&#39;,
       &#39;Land.Slope&#39;, &#39;Neighborhood&#39;, &#39;Condition.1&#39;, &#39;Condition.2&#39;, &#39;Bldg.Type&#39;,
       &#39;House.Style&#39;, &#39;Overall.Qual&#39;, &#39;Overall.Cond&#39;, &#39;Year.Built&#39;,
       &#39;Year.Remod.Add&#39;, &#39;Roof.Style&#39;, &#39;Roof.Matl&#39;, &#39;Exterior.1st&#39;,
       &#39;Exterior.2nd&#39;, &#39;Mas.Vnr.Type&#39;, &#39;Mas.Vnr.Area&#39;, &#39;Exter.Qual&#39;,
       &#39;Exter.Cond&#39;, &#39;Foundation&#39;, &#39;Bsmt.Qual&#39;, &#39;Bsmt.Cond&#39;, &#39;Bsmt.Exposure&#39;,
       &#39;BsmtFin.Type.1&#39;, &#39;BsmtFin.SF.1&#39;, &#39;BsmtFin.Type.2&#39;, &#39;BsmtFin.SF.2&#39;,
       &#39;Bsmt.Unf.SF&#39;, &#39;Total.Bsmt.SF&#39;, &#39;Heating&#39;, &#39;Heating.QC&#39;, &#39;Central.Air&#39;,
       &#39;Electrical&#39;, &#39;X1st.Flr.SF&#39;, &#39;X2nd.Flr.SF&#39;, &#39;Low.Qual.Fin.SF&#39;,
       &#39;Gr.Liv.Area&#39;, &#39;Bsmt.Full.Bath&#39;, &#39;Bsmt.Half.Bath&#39;, &#39;Full.Bath&#39;,
       &#39;Half.Bath&#39;, &#39;Bedroom.AbvGr&#39;, &#39;Kitchen.AbvGr&#39;, &#39;Kitchen.Qual&#39;,
       &#39;TotRms.AbvGrd&#39;, &#39;Functional&#39;, &#39;Fireplaces&#39;, &#39;Garage.Type&#39;,
       &#39;Garage.Yr.Blt&#39;, &#39;Garage.Finish&#39;, &#39;Garage.Cars&#39;, &#39;Garage.Area&#39;,
       &#39;Garage.Qual&#39;, &#39;Garage.Cond&#39;, &#39;Paved.Drive&#39;, &#39;Wood.Deck.SF&#39;,
       &#39;Open.Porch.SF&#39;, &#39;Enclosed.Porch&#39;, &#39;X3Ssn.Porch&#39;, &#39;Screen.Porch&#39;,
       &#39;Pool.Area&#39;, &#39;Misc.Val&#39;, &#39;Mo.Sold&#39;, &#39;Yr.Sold&#39;, &#39;Sale.Type&#39;,
       &#39;Sale.Condition&#39;, &#39;SalePrice&#39;, &#39;Alley_missing&#39;, &#39;Pool.QC_missing&#39;,
       &#39;Fence_missing&#39;, &#39;Misc.Feature_missing&#39;, &#39;Fireplace.Qu_missing&#39;,
       &#39;Alley_Pave&#39;, &#39;Pool.QC_Fa&#39;, &#39;Pool.QC_Gd&#39;, &#39;Pool.QC_TA&#39;, &#39;Fence_GdWo&#39;,
       &#39;Fence_MnPrv&#39;, &#39;Fence_MnWw&#39;, &#39;Misc.Feature_Gar2&#39;, &#39;Misc.Feature_Othr&#39;,
       &#39;Misc.Feature_Shed&#39;, &#39;Misc.Feature_TenC&#39;, &#39;Fireplace.Qu_Fa&#39;,
       &#39;Fireplace.Qu_Gd&#39;, &#39;Fireplace.Qu_Po&#39;, &#39;Fireplace.Qu_TA&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This dataset has several types of columns - continuous features encoded as ints and floats, but also some ordinal variables have snick in as ints. We'll properly define all the int and float colukmns first:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">float_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Lot.Frontage&#39;</span><span class="p">,</span> 
              <span class="s1">&#39;Mas.Vnr.Area&#39;</span><span class="p">,</span> 
              <span class="s1">&#39;BsmtFin.SF.1&#39;</span><span class="p">,</span> 
              <span class="s1">&#39;BsmtFin.SF.2&#39;</span><span class="p">,</span> 
              <span class="s1">&#39;Bsmt.Unf.SF&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Total.Bsmt.SF&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Garage.Cars&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Garage.Area&#39;</span>
             <span class="p">]</span>

<span class="n">int_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MS.SubClass&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Lot.Area&#39;</span><span class="p">,</span>
            <span class="s1">&#39;X1st.Flr.SF&#39;</span><span class="p">,</span>
            <span class="s1">&#39;X2nd.Flr.SF&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Low.Qual.Fin.SF&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Gr.Liv.Area&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Full.Bath&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Half.Bath&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Bedroom.AbvGr&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Kitchen.AbvGr&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;TotRms.AbvGrd&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Fireplaces&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Wood.Deck.SF&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Open.Porch.SF&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Enclosed.Porch&#39;</span><span class="p">,</span>
            <span class="s1">&#39;X3Ssn.Porch&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Screen.Porch&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Pool.Area&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Misc.Val&#39;</span>
           <span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, we need some way to deal with ordinal features:</p>
<ul>
<li>Lot Shape (Ordinal): General shape of property</li>
<li>Utilities (Ordinal): Type of utilities available</li>
<li>Land Slope (Ordinal): Slope of property</li>
<li>Overall Qual (Ordinal): Rates the overall material and finish of the house</li>
<li>Overall Cond (Ordinal): Rates the overall condition of the house</li>
<li>Exter Qual (Ordinal): Evaluates the quality of the material on the exterior</li>
<li>Exter Cond (Ordinal): Evaluates the present condition of the material on the exterior</li>
<li>Bsmt Qual (Ordinal): Evaluates the height of the basement</li>
<li>Bsmt Cond (Ordinal): Evaluates the general condition of the basement</li>
<li>Bsmt Exposure   (Ordinal): Refers to walkout or garden level walls</li>
<li>BsmtFin Type 1  (Ordinal): Rating of basement finished area</li>
<li>BsmtFin Type 2  (Ordinal): Rating of basement finished area (if multiple types)</li>
<li>HeatingQC (Ordinal): Heating quality and condition</li>
<li>Electrical (Ordinal): Electrical system</li>
<li>FireplaceQu (Ordinal): Fireplace quality</li>
<li>Garage Finish (Ordinal) : Interior finish of the garage</li>
<li>Garage Qual (Ordinal): Garage quality</li>
<li>Garage Cond (Ordinal): Garage condition</li>
<li>Paved Drive (Ordinal): Paved driveway</li>
<li>Pool QC (Ordinal): Pool quality</li>
<li>Fence (Ordinal): Fence quality</li>
</ul>
<p>To do this we could use the OrdinalEncoder from <a href="http://contrib.scikit-learn.org/categorical-encoding/">http://contrib.scikit-learn.org/categorical-encoding/</a>, which will be included in sklearn in a future release  - but I have trouble getting this to work with Pandas. Another choice is just to write our own. What we'll do instead is to mix ordinal and categorical variables, and use the OneHotEncoder from the category_encoders package.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ord_cols</span>     <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Lot.Shape&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Utilities&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Land.Slope&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Overall.Qual&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Overall.Cond&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Exter.Qual&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;Exter.Cond&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Bsmt.Qual&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Bsmt.Cond&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;Bsmt.Exposure&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;BsmtFin.Type.1&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;BsmtFin.SF.1&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Heating.QC&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Electrical&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Fireplace.Qu&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Garage.Finish&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Garage.Qual&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Garage.Cond&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Paved.Drive&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Pool.QC&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Fence&#39;</span><span class="p">,</span>
               <span class="p">]</span>

<span class="n">cat_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MS.SubClass&#39;</span><span class="p">,</span>
            <span class="s1">&#39;MS.Zoning&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Street&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Alley&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Land.Contour&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Lot.Config&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Neighborhood&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Condition.1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Condition.2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Bldg.Type&#39;</span><span class="p">,</span>
            <span class="s1">&#39;House.Style&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Roof.Style&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Exterior.1st&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;Exterior.2nd&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Mas.Vnr.Type&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Foundation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Heating&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Central.Air&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Garage.Type&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Misc.Feature&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Sale.Type&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Sale.Condition&#39;</span>
<span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, we define a few useful transforms and put together our first pipeline.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">DataFrameSelector</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Select columns from pandas dataframe by specifying a list of column names</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col_names</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">col_names</span> <span class="o">=</span> <span class="n">col_names</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">X</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">col_names</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Scale</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">=</span> <span class="n">cols</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[]</span>
        
    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scaler</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">index</span>
        <span class="k">return</span> <span class="bp">self</span>
        
    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scaler</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.externals.joblib</span> <span class="kn">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">FeatureUnion</span><span class="p">,</span> <span class="n">_fit_transform_one</span><span class="p">,</span> <span class="n">_transform_one</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">sparse</span>


<span class="k">class</span> <span class="nc">FeatureUnion</span><span class="p">(</span><span class="n">FeatureUnion</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">fit_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fit_params</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_transformers</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_jobs</span><span class="p">)(</span>
            <span class="n">delayed</span><span class="p">(</span><span class="n">_fit_transform_one</span><span class="p">)(</span><span class="n">trans</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span>
                                        <span class="o">**</span><span class="n">fit_params</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">trans</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter</span><span class="p">())</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
            <span class="c1"># All transformers are None</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">Xs</span><span class="p">,</span> <span class="n">transformers</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_transformer_list</span><span class="p">(</span><span class="n">transformers</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">sparse</span><span class="o">.</span><span class="n">issparse</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">Xs</span><span class="p">):</span>
            <span class="n">Xs</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">Xs</span><span class="p">)</span><span class="o">.</span><span class="n">tocsr</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Xs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merge_dataframes_by_column</span><span class="p">(</span><span class="n">Xs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Xs</span>

    <span class="k">def</span> <span class="nf">merge_dataframes_by_column</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Xs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">Xs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">Xs</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_jobs</span><span class="p">)(</span>
            <span class="n">delayed</span><span class="p">(</span><span class="n">_transform_one</span><span class="p">)(</span><span class="n">trans</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">trans</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter</span><span class="p">())</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Xs</span><span class="p">:</span>
            <span class="c1"># All transformers are None</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">sparse</span><span class="o">.</span><span class="n">issparse</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">Xs</span><span class="p">):</span>
            <span class="n">Xs</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">Xs</span><span class="p">)</span><span class="o">.</span><span class="n">tocsr</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Xs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merge_dataframes_by_column</span><span class="p">(</span><span class="n">Xs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Xs</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span><span class="p">,</span> <span class="n">LabelEncoder</span><span class="p">,</span> <span class="n">LabelBinarizer</span>
<span class="kn">from</span> <span class="nn">category_encoders</span> <span class="kn">import</span> <span class="n">OneHotEncoder</span>

<span class="n">numerical_cols</span> <span class="o">=</span> <span class="n">int_cols</span> <span class="o">+</span> <span class="n">float_cols</span>

<span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;features&#39;</span><span class="p">,</span> <span class="n">FeatureUnion</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">transformer_list</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;numericals&#39;</span><span class="p">,</span> <span class="n">Pipeline</span><span class="p">([</span>
             <span class="p">(</span><span class="s1">&#39;selector&#39;</span><span class="p">,</span> <span class="n">DataFrameSelector</span><span class="p">(</span><span class="n">numerical_cols</span><span class="p">)),</span>
             <span class="p">(</span><span class="s1">&#39;imputer&#39;</span><span class="p">,</span> <span class="n">ImputeWithDummy</span><span class="p">(</span><span class="n">numerical_cols</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)),</span>
             <span class="c1">#(&#39;scaling&#39;, Scale(numerical_cols))</span>
        <span class="p">])),</span>
        
        <span class="c1">#(&#39;categoricals&#39;, Pipeline([</span>
        <span class="c1">#     (&#39;selector&#39;, DataFrameSelector(cat_cols)), </span>
        <span class="c1">#     (&#39;encode&#39;, OneHotEncoder(cat_cols, return_df=True)),</span>
        <span class="c1">#])),</span>
        
        <span class="c1">#(&#39;NanImpute&#39;, Pipeline([</span>
        <span class="c1">##     (&#39;selector&#39;, DataFrameSelector([&#39;Alley&#39;, &#39;Pool.QC&#39;, &#39;Fence&#39;, &#39;Misc.Feature&#39;, &#39;Fireplace.Qu&#39;])),</span>
        <span class="c1">#     (&#39;nan_impute&#39;, NaNImpute([&#39;Alley&#39;, &#39;Pool.QC&#39;, &#39;Fence&#39;, &#39;Misc.Feature&#39;, &#39;Fireplace.Qu&#39;], &#39;Not Applicable&#39;))</span>
        <span class="c1">#])),</span>
    <span class="p">])),</span> 
<span class="p">])</span>  
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;ames.csv&#39;</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;PID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X_trans</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">X_trans</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MS.SubClass</th>
      <th>Lot.Area</th>
      <th>X1st.Flr.SF</th>
      <th>X2nd.Flr.SF</th>
      <th>Low.Qual.Fin.SF</th>
      <th>Gr.Liv.Area</th>
      <th>Full.Bath</th>
      <th>Half.Bath</th>
      <th>Bedroom.AbvGr</th>
      <th>Kitchen.AbvGr</th>
      <th>...</th>
      <th>Pool.Area_missing</th>
      <th>Misc.Val_missing</th>
      <th>Lot.Frontage_missing</th>
      <th>Mas.Vnr.Area_missing</th>
      <th>BsmtFin.SF.1_missing</th>
      <th>BsmtFin.SF.2_missing</th>
      <th>Bsmt.Unf.SF_missing</th>
      <th>Total.Bsmt.SF_missing</th>
      <th>Garage.Cars_missing</th>
      <th>Garage.Area_missing</th>
    </tr>
    <tr>
      <th>PID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>526301100</th>
      <td>20</td>
      <td>31770</td>
      <td>1656</td>
      <td>0</td>
      <td>0</td>
      <td>1656</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>526350040</th>
      <td>20</td>
      <td>11622</td>
      <td>896</td>
      <td>0</td>
      <td>0</td>
      <td>896</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>526351010</th>
      <td>20</td>
      <td>14267</td>
      <td>1329</td>
      <td>0</td>
      <td>0</td>
      <td>1329</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>526353030</th>
      <td>20</td>
      <td>11160</td>
      <td>2110</td>
      <td>0</td>
      <td>0</td>
      <td>2110</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527105010</th>
      <td>60</td>
      <td>13830</td>
      <td>928</td>
      <td>701</td>
      <td>0</td>
      <td>1629</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527105030</th>
      <td>60</td>
      <td>9978</td>
      <td>926</td>
      <td>678</td>
      <td>0</td>
      <td>1604</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527127150</th>
      <td>120</td>
      <td>4920</td>
      <td>1338</td>
      <td>0</td>
      <td>0</td>
      <td>1338</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527145080</th>
      <td>120</td>
      <td>5005</td>
      <td>1280</td>
      <td>0</td>
      <td>0</td>
      <td>1280</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527146030</th>
      <td>120</td>
      <td>5389</td>
      <td>1616</td>
      <td>0</td>
      <td>0</td>
      <td>1616</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527162130</th>
      <td>60</td>
      <td>7500</td>
      <td>1028</td>
      <td>776</td>
      <td>0</td>
      <td>1804</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527163010</th>
      <td>60</td>
      <td>10000</td>
      <td>763</td>
      <td>892</td>
      <td>0</td>
      <td>1655</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527165230</th>
      <td>20</td>
      <td>7980</td>
      <td>1187</td>
      <td>0</td>
      <td>0</td>
      <td>1187</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527166040</th>
      <td>60</td>
      <td>8402</td>
      <td>789</td>
      <td>676</td>
      <td>0</td>
      <td>1465</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527180040</th>
      <td>20</td>
      <td>10176</td>
      <td>1341</td>
      <td>0</td>
      <td>0</td>
      <td>1341</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527182190</th>
      <td>120</td>
      <td>6820</td>
      <td>1502</td>
      <td>0</td>
      <td>0</td>
      <td>1502</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527216070</th>
      <td>60</td>
      <td>53504</td>
      <td>1690</td>
      <td>1589</td>
      <td>0</td>
      <td>3279</td>
      <td>3</td>
      <td>1</td>
      <td>4</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527225035</th>
      <td>50</td>
      <td>12134</td>
      <td>1080</td>
      <td>672</td>
      <td>0</td>
      <td>1752</td>
      <td>2</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527258010</th>
      <td>20</td>
      <td>11394</td>
      <td>1856</td>
      <td>0</td>
      <td>0</td>
      <td>1856</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527276150</th>
      <td>20</td>
      <td>19138</td>
      <td>864</td>
      <td>0</td>
      <td>0</td>
      <td>864</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527302110</th>
      <td>20</td>
      <td>13175</td>
      <td>2073</td>
      <td>0</td>
      <td>0</td>
      <td>2073</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527358140</th>
      <td>20</td>
      <td>11751</td>
      <td>1844</td>
      <td>0</td>
      <td>0</td>
      <td>1844</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527358200</th>
      <td>85</td>
      <td>10625</td>
      <td>1173</td>
      <td>0</td>
      <td>0</td>
      <td>1173</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527368020</th>
      <td>60</td>
      <td>7500</td>
      <td>814</td>
      <td>860</td>
      <td>0</td>
      <td>1674</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527402200</th>
      <td>20</td>
      <td>11241</td>
      <td>1004</td>
      <td>0</td>
      <td>0</td>
      <td>1004</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527402250</th>
      <td>20</td>
      <td>12537</td>
      <td>1078</td>
      <td>0</td>
      <td>0</td>
      <td>1078</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527403020</th>
      <td>20</td>
      <td>8450</td>
      <td>1056</td>
      <td>0</td>
      <td>0</td>
      <td>1056</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527404120</th>
      <td>20</td>
      <td>8400</td>
      <td>882</td>
      <td>0</td>
      <td>0</td>
      <td>882</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527425090</th>
      <td>20</td>
      <td>10500</td>
      <td>864</td>
      <td>0</td>
      <td>0</td>
      <td>864</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527427230</th>
      <td>120</td>
      <td>5858</td>
      <td>1337</td>
      <td>0</td>
      <td>0</td>
      <td>1337</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>527451180</th>
      <td>160</td>
      <td>1680</td>
      <td>483</td>
      <td>504</td>
      <td>0</td>
      <td>987</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>916477010</th>
      <td>20</td>
      <td>13618</td>
      <td>1960</td>
      <td>0</td>
      <td>0</td>
      <td>1960</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>921205030</th>
      <td>20</td>
      <td>11443</td>
      <td>2028</td>
      <td>0</td>
      <td>0</td>
      <td>2028</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>921205050</th>
      <td>20</td>
      <td>11577</td>
      <td>1838</td>
      <td>0</td>
      <td>0</td>
      <td>1838</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923125030</th>
      <td>20</td>
      <td>31250</td>
      <td>1600</td>
      <td>0</td>
      <td>0</td>
      <td>1600</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923202025</th>
      <td>90</td>
      <td>7020</td>
      <td>1368</td>
      <td>0</td>
      <td>0</td>
      <td>1368</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923203090</th>
      <td>120</td>
      <td>4500</td>
      <td>1216</td>
      <td>0</td>
      <td>0</td>
      <td>1216</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923203100</th>
      <td>120</td>
      <td>4500</td>
      <td>1337</td>
      <td>0</td>
      <td>0</td>
      <td>1337</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923205120</th>
      <td>20</td>
      <td>17217</td>
      <td>1140</td>
      <td>0</td>
      <td>0</td>
      <td>1140</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923225190</th>
      <td>160</td>
      <td>2665</td>
      <td>616</td>
      <td>688</td>
      <td>0</td>
      <td>1304</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923225240</th>
      <td>160</td>
      <td>2665</td>
      <td>925</td>
      <td>550</td>
      <td>0</td>
      <td>1475</td>
      <td>2</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923225260</th>
      <td>160</td>
      <td>3964</td>
      <td>1291</td>
      <td>1230</td>
      <td>0</td>
      <td>2521</td>
      <td>2</td>
      <td>1</td>
      <td>5</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923225510</th>
      <td>20</td>
      <td>10172</td>
      <td>874</td>
      <td>0</td>
      <td>0</td>
      <td>874</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923226150</th>
      <td>90</td>
      <td>11836</td>
      <td>1652</td>
      <td>0</td>
      <td>0</td>
      <td>1652</td>
      <td>2</td>
      <td>0</td>
      <td>4</td>
      <td>2</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923226180</th>
      <td>180</td>
      <td>1470</td>
      <td>630</td>
      <td>0</td>
      <td>0</td>
      <td>630</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923226290</th>
      <td>160</td>
      <td>1484</td>
      <td>546</td>
      <td>546</td>
      <td>0</td>
      <td>1092</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923227100</th>
      <td>20</td>
      <td>13384</td>
      <td>1360</td>
      <td>0</td>
      <td>0</td>
      <td>1360</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923228130</th>
      <td>180</td>
      <td>1533</td>
      <td>630</td>
      <td>0</td>
      <td>0</td>
      <td>630</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923228180</th>
      <td>160</td>
      <td>1533</td>
      <td>546</td>
      <td>546</td>
      <td>0</td>
      <td>1092</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923228210</th>
      <td>160</td>
      <td>1526</td>
      <td>546</td>
      <td>546</td>
      <td>0</td>
      <td>1092</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923228260</th>
      <td>160</td>
      <td>1936</td>
      <td>546</td>
      <td>546</td>
      <td>0</td>
      <td>1092</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923228310</th>
      <td>160</td>
      <td>1894</td>
      <td>546</td>
      <td>546</td>
      <td>0</td>
      <td>1092</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923229110</th>
      <td>90</td>
      <td>12640</td>
      <td>1728</td>
      <td>0</td>
      <td>0</td>
      <td>1728</td>
      <td>2</td>
      <td>0</td>
      <td>4</td>
      <td>2</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923230040</th>
      <td>90</td>
      <td>9297</td>
      <td>1728</td>
      <td>0</td>
      <td>0</td>
      <td>1728</td>
      <td>2</td>
      <td>0</td>
      <td>4</td>
      <td>2</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923250060</th>
      <td>20</td>
      <td>17400</td>
      <td>1126</td>
      <td>0</td>
      <td>0</td>
      <td>1126</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923251180</th>
      <td>20</td>
      <td>20000</td>
      <td>1224</td>
      <td>0</td>
      <td>0</td>
      <td>1224</td>
      <td>1</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923275080</th>
      <td>80</td>
      <td>7937</td>
      <td>1003</td>
      <td>0</td>
      <td>0</td>
      <td>1003</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923276100</th>
      <td>20</td>
      <td>8885</td>
      <td>902</td>
      <td>0</td>
      <td>0</td>
      <td>902</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>923400125</th>
      <td>85</td>
      <td>10441</td>
      <td>970</td>
      <td>0</td>
      <td>0</td>
      <td>970</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>924100070</th>
      <td>20</td>
      <td>10010</td>
      <td>1389</td>
      <td>0</td>
      <td>0</td>
      <td>1389</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>924151050</th>
      <td>60</td>
      <td>9627</td>
      <td>996</td>
      <td>1004</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>2930 rows × 54 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">X_trans</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([(</span><span class="s1">&#39;pipeline&#39;</span><span class="p">,</span> <span class="n">pipe</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;clf&#39;</span><span class="p">,</span> <span class="n">LarsCV</span><span class="p">())])</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Pipeline(memory=None,
     steps=[(&#39;pipeline&#39;, Pipeline(memory=None,
     steps=[(&#39;features&#39;, FeatureUnion(n_jobs=1,
       transformer_list=[(&#39;numericals&#39;, Pipeline(memory=None,
     steps=[(&#39;selector&#39;, DataFrameSelector(col_names=[&#39;MS.SubClass&#39;, &#39;Lot.Area&#39;, &#39;X1st.Flr.SF&#39;, &#39;X2nd.Flr.SF&#39;, &#39;Low.Qual.Fin.SF&#39;, &#39;Gr.Liv.Area&#39;, &#39;Fu...max_n_alphas=1000, n_jobs=1, normalize=True,
    positive=False, precompute=&#39;auto&#39;, verbose=False))])</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipe</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;MS.SubClass&#39;, &#39;Lot.Area&#39;, &#39;X1st.Flr.SF&#39;, &#39;X2nd.Flr.SF&#39;,
       &#39;Low.Qual.Fin.SF&#39;, &#39;Gr.Liv.Area&#39;, &#39;Full.Bath&#39;, &#39;Half.Bath&#39;,
       &#39;Bedroom.AbvGr&#39;, &#39;Kitchen.AbvGr&#39;, &#39;TotRms.AbvGrd&#39;, &#39;Fireplaces&#39;,
       &#39;Wood.Deck.SF&#39;, &#39;Open.Porch.SF&#39;, &#39;Enclosed.Porch&#39;, &#39;X3Ssn.Porch&#39;,
       &#39;Screen.Porch&#39;, &#39;Pool.Area&#39;, &#39;Misc.Val&#39;, &#39;Lot.Frontage&#39;, &#39;Mas.Vnr.Area&#39;,
       &#39;BsmtFin.SF.1&#39;, &#39;BsmtFin.SF.2&#39;, &#39;Bsmt.Unf.SF&#39;, &#39;Total.Bsmt.SF&#39;,
       &#39;Garage.Cars&#39;, &#39;Garage.Area&#39;, &#39;MS.SubClass_missing&#39;, &#39;Lot.Area_missing&#39;,
       &#39;X1st.Flr.SF_missing&#39;, &#39;X2nd.Flr.SF_missing&#39;, &#39;Low.Qual.Fin.SF_missing&#39;,
       &#39;Gr.Liv.Area_missing&#39;, &#39;Full.Bath_missing&#39;, &#39;Half.Bath_missing&#39;,
       &#39;Bedroom.AbvGr_missing&#39;, &#39;Kitchen.AbvGr_missing&#39;,
       &#39;TotRms.AbvGrd_missing&#39;, &#39;Fireplaces_missing&#39;, &#39;Wood.Deck.SF_missing&#39;,
       &#39;Open.Porch.SF_missing&#39;, &#39;Enclosed.Porch_missing&#39;,
       &#39;X3Ssn.Porch_missing&#39;, &#39;Screen.Porch_missing&#39;, &#39;Pool.Area_missing&#39;,
       &#39;Misc.Val_missing&#39;, &#39;Lot.Frontage_missing&#39;, &#39;Mas.Vnr.Area_missing&#39;,
       &#39;BsmtFin.SF.1_missing&#39;, &#39;BsmtFin.SF.2_missing&#39;, &#39;Bsmt.Unf.SF_missing&#39;,
       &#39;Total.Bsmt.SF_missing&#39;, &#39;Garage.Cars_missing&#39;, &#39;Garage.Area_missing&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">preds</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">cross_val_score</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">KFold</span>

<span class="k">def</span> <span class="nf">rmse_cv</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">rmse</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="o">-</span><span class="n">cross_val_score</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
    <span class="k">return</span><span class="p">(</span><span class="n">rmse</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rmse_cv</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([37647.53964453, 71123.27879506])</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">r2_score</span>

<span class="k">def</span> <span class="nf">get_score</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">labels</span><span class="p">):</span>    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;R2: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r2_score</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">labels</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_score</span><span class="p">(</span><span class="n">preds</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>R2: 0.6208433062823728
</pre>
</div>
</div>

</div>
</div>

</div>
    

</div>



  </div><a class="u-url" href="/TomKealy.github.io/2021/04/01/ames-iowa.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/TomKealy.github.io/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/TomKealy.github.io/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/TomKealy.github.io/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>An easy to use blogging platform with support for Jupyter Notebooks.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/fastai" title="fastai"><svg class="svg-icon grey"><use xlink:href="/TomKealy.github.io/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/fastdotai" title="fastdotai"><svg class="svg-icon grey"><use xlink:href="/TomKealy.github.io/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
